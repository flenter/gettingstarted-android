box: flenter/android
build:
  steps:
    - script:
        name: install build tools
        code: |
            export ANDROID_BUILD_TOOLS="17"
            wget https://dl-ssl.google.com/android/repository/build-tools_r${ANDROID_BUILD_TOOLS}-linux.zip
            unzip build-tools_r${ANDROID_BUILD_TOOLS}-linux.zip -d $ANDROID_HOME
            mkdir -p $ANDROID_HOME/build-tools/
            mv $ANDROID_HOME/android-4.2.2 $ANDROID_HOME/build-tools/${ANDROID_BUILD_TOOLS}

    - script:
        name: update sdk
        code: |
          cd $ANDROID_HOME
          expect /pipeline/build/android-update.exp
          cd $WERCKER_SOURCE_DIR
    - script:
        name: run gradle
        code: |
          gradle -v
          gradle --refresh-dependencies --rerun-tasks --full-stacktrace build -q
    - script:
        name: show build result
        code: |
          ls -la GettingStarted/build/apk
